{"date":"Thu Mar 02 2017 14:23:18 GMT+0800 (CST)","process":{"pid":11733,"uid":501,"gid":20,"cwd":"/Users/junen/range/blog","execPath":"/usr/local/bin/node","version":"v6.10.0","argv":["/usr/local/bin/node","/Users/junen/range/blog/app.js"],"memoryUsage":{"rss":76001280,"heapTotal":53637120,"heapUsed":38830728,"external":35900554}},"os":{"loadavg":[1.5986328125,1.93994140625,1.9931640625],"uptime":2787},"trace":[{"column":26,"file":"<anonymous>","function":"eval (eval at compile (/Users/junen/range/blog/node_modules/ejs/lib/ejs.js:524:12),","line":20,"method":"js:524:12),","native":false},{"column":17,"file":"<anonymous>","function":"eval (eval at compile (/Users/junen/range/blog/node_modules/ejs/lib/ejs.js:524:12),","line":14,"method":"js:524:12),","native":false},{"column":17,"file":"<anonymous>","function":"eval (eval at compile (/Users/junen/range/blog/node_modules/ejs/lib/ejs.js:524:12),","line":9,"method":"js:524:12),","native":false},{"column":34,"file":"/Users/junen/range/blog/node_modules/ejs/lib/ejs.js","function":"tryHandleCache","line":203,"method":null,"native":false},{"column":8,"file":"/Users/junen/range/blog/node_modules/express/lib/view.js","function":"View.render","line":126,"method":"render","native":false},{"column":10,"file":"/Users/junen/range/blog/node_modules/express/lib/application.js","function":"tryRender","line":639,"method":null,"native":false},{"column":3,"file":"/Users/junen/range/blog/node_modules/express/lib/application.js","function":"EventEmitter.render","line":591,"method":"render","native":false},{"column":7,"file":"/Users/junen/range/blog/node_modules/express/lib/response.js","function":"ServerResponse.render","line":960,"method":"render","native":false},{"column":7,"file":"/Users/junen/range/blog/routes/index.js","function":"app.use","line":20,"method":"use","native":false},{"column":5,"file":"/Users/junen/range/blog/node_modules/express/lib/router/layer.js","function":"Layer.handle_error","line":71,"method":"handle_error","native":false},{"column":13,"file":"/Users/junen/range/blog/node_modules/express/lib/router/index.js","function":"trim_prefix","line":310,"method":null,"native":false},{"column":7,"file":"/Users/junen/range/blog/node_modules/express/lib/router/index.js","function":null,"line":280,"method":null,"native":false},{"column":10,"file":"/Users/junen/range/blog/node_modules/express/lib/router/index.js","function":"next","line":271,"method":null,"native":false},{"column":13,"file":"/Users/junen/range/blog/node_modules/express/lib/router/index.js","function":"trim_prefix","line":310,"method":null,"native":false},{"column":7,"file":"/Users/junen/range/blog/node_modules/express/lib/router/index.js","function":null,"line":280,"method":null,"native":false},{"column":10,"file":"/Users/junen/range/blog/node_modules/express/lib/router/index.js","function":"next","line":271,"method":null,"native":false},{"column":8,"file":"/Users/junen/range/blog/node_modules/express/lib/view.js","function":"View.render","line":126,"method":"render","native":false},{"column":10,"file":"/Users/junen/range/blog/node_modules/express/lib/application.js","function":"tryRender","line":639,"method":null,"native":false},{"column":3,"file":"/Users/junen/range/blog/node_modules/express/lib/application.js","function":"EventEmitter.render","line":591,"method":"render","native":false},{"column":7,"file":"/Users/junen/range/blog/node_modules/express/lib/response.js","function":"ServerResponse.render","line":960,"method":"render","native":false},{"column":8,"file":"/Users/junen/range/blog/routes/posts.js","function":"PostModel.getPosts.then","line":13,"method":"getPosts.then","native":false},{"column":23,"file":"/Users/junen/range/blog/node_modules/mongolass/node_modules/bluebird/js/release/util.js","function":"tryCatcher","line":16,"method":null,"native":false}],"stack":["ReferenceError: /Users/junen/range/blog/views/error.ejs:1"," >> 1| <%- include('header') %>","    2| \t<h2><%= error.message %></h2>","    3|     <p><%= error.stack %></p>","    4| <%- include('footer') %>","","/Users/junen/range/blog/views/header.ejs:10","    8| <body>","    9|   <div class=\"container\">"," >> 10|     <%- include('components/nav') %>","    11|     <%- include('components/notification') %>","    12|   ","","/Users/junen/range/blog/views/components/nav.ejs:12","    10|     \t\t\t\t<% if (user) { %>  ","    11|     \t\t\t\t<li class=\"nav-item active\">"," >> 12|     \t\t\t\t<a class=\"nav-link\" href=\"/posts?author=<%= user_id %>","    13|     \t\t\t\t\t\t\">个人主页","    14|     \t\t\t\t\t\t<span class=\"sr-only\">(current)</span>","    15|     \t\t\t\t\t</a>","","user_id is not defined","    at eval (eval at compile (/Users/junen/range/blog/node_modules/ejs/lib/ejs.js:524:12), <anonymous>:20:26)","    at eval (eval at compile (/Users/junen/range/blog/node_modules/ejs/lib/ejs.js:524:12), <anonymous>:14:17)","    at eval (eval at compile (/Users/junen/range/blog/node_modules/ejs/lib/ejs.js:524:12), <anonymous>:9:17)","    at tryHandleCache (/Users/junen/range/blog/node_modules/ejs/lib/ejs.js:203:34)","    at View.render (/Users/junen/range/blog/node_modules/express/lib/view.js:126:8)","    at tryRender (/Users/junen/range/blog/node_modules/express/lib/application.js:639:10)","    at EventEmitter.render (/Users/junen/range/blog/node_modules/express/lib/application.js:591:3)","    at ServerResponse.render (/Users/junen/range/blog/node_modules/express/lib/response.js:960:7)","    at app.use (/Users/junen/range/blog/routes/index.js:20:7)","    at Layer.handle_error (/Users/junen/range/blog/node_modules/express/lib/router/layer.js:71:5)","    at trim_prefix (/Users/junen/range/blog/node_modules/express/lib/router/index.js:310:13)","    at /Users/junen/range/blog/node_modules/express/lib/router/index.js:280:7","    at next (/Users/junen/range/blog/node_modules/express/lib/router/index.js:271:10)","    at trim_prefix (/Users/junen/range/blog/node_modules/express/lib/router/index.js:310:13)","    at /Users/junen/range/blog/node_modules/express/lib/router/index.js:280:7","    at next (/Users/junen/range/blog/node_modules/express/lib/router/index.js:271:10)","    at View.render (/Users/junen/range/blog/node_modules/express/lib/view.js:126:8)","    at tryRender (/Users/junen/range/blog/node_modules/express/lib/application.js:639:10)","    at EventEmitter.render (/Users/junen/range/blog/node_modules/express/lib/application.js:591:3)","    at ServerResponse.render (/Users/junen/range/blog/node_modules/express/lib/response.js:960:7)","    at PostModel.getPosts.then (/Users/junen/range/blog/routes/posts.js:13:8)","    at tryCatcher (/Users/junen/range/blog/node_modules/mongolass/node_modules/bluebird/js/release/util.js:16:23)"],"req":{"url":"/posts","headers":{"host":"localhost:3000","connection":"keep-alive","cache-control":"max-age=0","upgrade-insecure-requests":"1","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/56.0.2924.87 Safari/537.36","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8","accept-encoding":"gzip, deflate, sdch, br","accept-language":"zh-CN,zh;q=0.8,en;q=0.6","cookie":"blog=s%3AOI3FEyNVRs2harXPS8eeGxu2Wv_puXIY.j2YIuGAzdA1panQOSbY4ynKmgfHTiK6muOEgU8UUdzM","if-none-match":"W/\"1b67-Ic7NdHSz0xYFSEtwxn2LuQ\""},"method":"GET","httpVersion":"1.1","originalUrl":"/posts","query":{}},"level":"error","message":"middlewareError","timestamp":"2017-03-02T06:23:18.738Z"}
{"date":"Fri Mar 03 2017 10:41:38 GMT+0800 (CST)","process":{"pid":54679,"uid":501,"gid":20,"cwd":"/Users/junen/range/blog","execPath":"/usr/local/bin/node","version":"v6.10.0","argv":["/usr/local/bin/node","/Users/junen/range/blog/app.js"],"memoryUsage":{"rss":74293248,"heapTotal":68255744,"heapUsed":30513144,"external":35878409}},"os":{"loadavg":[2.53466796875,2.36474609375,2.21484375],"uptime":75888},"trace":[{"column":19,"file":"<anonymous>","function":"eval (eval at compile (/Users/junen/range/blog/node_modules/ejs/lib/ejs.js:524:12),","line":14,"method":"js:524:12),","native":false},{"column":17,"file":"<anonymous>","function":"eval (eval at compile (/Users/junen/range/blog/node_modules/ejs/lib/ejs.js:524:12),","line":9,"method":"js:524:12),","native":false},{"column":34,"file":"/Users/junen/range/blog/node_modules/ejs/lib/ejs.js","function":"tryHandleCache","line":203,"method":null,"native":false},{"column":8,"file":"/Users/junen/range/blog/node_modules/express/lib/view.js","function":"View.render","line":126,"method":"render","native":false},{"column":10,"file":"/Users/junen/range/blog/node_modules/express/lib/application.js","function":"tryRender","line":639,"method":null,"native":false},{"column":3,"file":"/Users/junen/range/blog/node_modules/express/lib/application.js","function":"EventEmitter.render","line":591,"method":"render","native":false},{"column":7,"file":"/Users/junen/range/blog/node_modules/express/lib/response.js","function":"ServerResponse.render","line":960,"method":"render","native":false},{"column":7,"file":"/Users/junen/range/blog/routes/index.js","function":"app.use","line":20,"method":"use","native":false},{"column":5,"file":"/Users/junen/range/blog/node_modules/express/lib/router/layer.js","function":"Layer.handle_error","line":71,"method":"handle_error","native":false},{"column":13,"file":"/Users/junen/range/blog/node_modules/express/lib/router/index.js","function":"trim_prefix","line":310,"method":null,"native":false},{"column":7,"file":"/Users/junen/range/blog/node_modules/express/lib/router/index.js","function":null,"line":280,"method":null,"native":false},{"column":10,"file":"/Users/junen/range/blog/node_modules/express/lib/router/index.js","function":"next","line":271,"method":null,"native":false},{"column":13,"file":"/Users/junen/range/blog/node_modules/express/lib/router/index.js","function":"trim_prefix","line":310,"method":null,"native":false},{"column":7,"file":"/Users/junen/range/blog/node_modules/express/lib/router/index.js","function":null,"line":280,"method":null,"native":false},{"column":10,"file":"/Users/junen/range/blog/node_modules/express/lib/router/index.js","function":"next","line":271,"method":null,"native":false},{"column":8,"file":"/Users/junen/range/blog/node_modules/express/lib/view.js","function":"View.render","line":126,"method":"render","native":false},{"column":10,"file":"/Users/junen/range/blog/node_modules/express/lib/application.js","function":"tryRender","line":639,"method":null,"native":false},{"column":3,"file":"/Users/junen/range/blog/node_modules/express/lib/application.js","function":"EventEmitter.render","line":591,"method":"render","native":false},{"column":7,"file":"/Users/junen/range/blog/node_modules/express/lib/response.js","function":"ServerResponse.render","line":960,"method":"render","native":false},{"column":8,"file":"/Users/junen/range/blog/routes/posts.js","function":"PostModel.getPosts.then","line":13,"method":"getPosts.then","native":false},{"column":23,"file":"/Users/junen/range/blog/node_modules/mongolass/node_modules/bluebird/js/release/util.js","function":"tryCatcher","line":16,"method":null,"native":false},{"column":31,"file":"/Users/junen/range/blog/node_modules/mongolass/node_modules/bluebird/js/release/promise.js","function":"Promise._settlePromiseFromHandler","line":510,"method":"_settlePromiseFromHandler","native":false}],"stack":["ReferenceError: /Users/junen/range/blog/views/error.ejs:1"," >> 1| <%- include('header') %>","    2| <div class=\"alert alert-warning\" role=\"alert\"> ","    3| \t<strong><%= error.message %></strong>","    4| \t<br><%= error.stack %>","","/Users/junen/range/blog/views/header.ejs:10","    8| <body>","    9|   <div class=\"container\">"," >> 10|   <% if(user && post.author._id && user._id.toString() === post.author._id.toString()){%>s","    11|   <header class=\"header\">","    12| \t\t<h3 class=\"text-muted\"><%= blog.title %></h3>","    13|     \t<p><%= blog.description %></p>","","post is not defined","    at eval (eval at compile (/Users/junen/range/blog/node_modules/ejs/lib/ejs.js:524:12), <anonymous>:14:19)","    at eval (eval at compile (/Users/junen/range/blog/node_modules/ejs/lib/ejs.js:524:12), <anonymous>:9:17)","    at tryHandleCache (/Users/junen/range/blog/node_modules/ejs/lib/ejs.js:203:34)","    at View.render (/Users/junen/range/blog/node_modules/express/lib/view.js:126:8)","    at tryRender (/Users/junen/range/blog/node_modules/express/lib/application.js:639:10)","    at EventEmitter.render (/Users/junen/range/blog/node_modules/express/lib/application.js:591:3)","    at ServerResponse.render (/Users/junen/range/blog/node_modules/express/lib/response.js:960:7)","    at app.use (/Users/junen/range/blog/routes/index.js:20:7)","    at Layer.handle_error (/Users/junen/range/blog/node_modules/express/lib/router/layer.js:71:5)","    at trim_prefix (/Users/junen/range/blog/node_modules/express/lib/router/index.js:310:13)","    at /Users/junen/range/blog/node_modules/express/lib/router/index.js:280:7","    at next (/Users/junen/range/blog/node_modules/express/lib/router/index.js:271:10)","    at trim_prefix (/Users/junen/range/blog/node_modules/express/lib/router/index.js:310:13)","    at /Users/junen/range/blog/node_modules/express/lib/router/index.js:280:7","    at next (/Users/junen/range/blog/node_modules/express/lib/router/index.js:271:10)","    at View.render (/Users/junen/range/blog/node_modules/express/lib/view.js:126:8)","    at tryRender (/Users/junen/range/blog/node_modules/express/lib/application.js:639:10)","    at EventEmitter.render (/Users/junen/range/blog/node_modules/express/lib/application.js:591:3)","    at ServerResponse.render (/Users/junen/range/blog/node_modules/express/lib/response.js:960:7)","    at PostModel.getPosts.then (/Users/junen/range/blog/routes/posts.js:13:8)","    at tryCatcher (/Users/junen/range/blog/node_modules/mongolass/node_modules/bluebird/js/release/util.js:16:23)","    at Promise._settlePromiseFromHandler (/Users/junen/range/blog/node_modules/mongolass/node_modules/bluebird/js/release/promise.js:510:31)"],"req":{"url":"/posts","headers":{"host":"localhost:3000","connection":"keep-alive","pragma":"no-cache","cache-control":"no-cache","upgrade-insecure-requests":"1","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/56.0.2924.87 Safari/537.36","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8","accept-encoding":"gzip, deflate, sdch, br","accept-language":"zh-CN,zh;q=0.8,en;q=0.6","cookie":"blog=s%3AOI3FEyNVRs2harXPS8eeGxu2Wv_puXIY.j2YIuGAzdA1panQOSbY4ynKmgfHTiK6muOEgU8UUdzM"},"method":"GET","httpVersion":"1.1","originalUrl":"/posts","query":{}},"level":"error","message":"middlewareError","timestamp":"2017-03-03T02:41:38.295Z"}
{"date":"Fri Mar 03 2017 10:44:52 GMT+0800 (CST)","process":{"pid":55115,"uid":501,"gid":20,"cwd":"/Users/junen/range/blog","execPath":"/usr/local/bin/node","version":"v6.10.0","argv":["/usr/local/bin/node","/Users/junen/range/blog/app.js"],"memoryUsage":{"rss":74919936,"heapTotal":68255744,"heapUsed":31602800,"external":36302699}},"os":{"loadavg":[2.00732421875,2.23486328125,2.19287109375],"uptime":76082},"trace":[{"column":30,"file":"<anonymous>","function":"eval (eval at compile (/Users/junen/range/blog/node_modules/ejs/lib/ejs.js:524:12),","line":26,"method":"js:524:12),","native":false},{"column":17,"file":"<anonymous>","function":"eval (eval at compile (/Users/junen/range/blog/node_modules/ejs/lib/ejs.js:524:12),","line":9,"method":"js:524:12),","native":false},{"column":34,"file":"/Users/junen/range/blog/node_modules/ejs/lib/ejs.js","function":"tryHandleCache","line":203,"method":null,"native":false},{"column":8,"file":"/Users/junen/range/blog/node_modules/express/lib/view.js","function":"View.render","line":126,"method":"render","native":false},{"column":10,"file":"/Users/junen/range/blog/node_modules/express/lib/application.js","function":"tryRender","line":639,"method":null,"native":false},{"column":3,"file":"/Users/junen/range/blog/node_modules/express/lib/application.js","function":"EventEmitter.render","line":591,"method":"render","native":false},{"column":7,"file":"/Users/junen/range/blog/node_modules/express/lib/response.js","function":"ServerResponse.render","line":960,"method":"render","native":false},{"column":7,"file":"/Users/junen/range/blog/routes/index.js","function":"app.use","line":20,"method":"use","native":false},{"column":5,"file":"/Users/junen/range/blog/node_modules/express/lib/router/layer.js","function":"Layer.handle_error","line":71,"method":"handle_error","native":false},{"column":13,"file":"/Users/junen/range/blog/node_modules/express/lib/router/index.js","function":"trim_prefix","line":310,"method":null,"native":false},{"column":7,"file":"/Users/junen/range/blog/node_modules/express/lib/router/index.js","function":null,"line":280,"method":null,"native":false},{"column":10,"file":"/Users/junen/range/blog/node_modules/express/lib/router/index.js","function":"next","line":271,"method":null,"native":false},{"column":13,"file":"/Users/junen/range/blog/node_modules/express/lib/router/index.js","function":"trim_prefix","line":310,"method":null,"native":false},{"column":7,"file":"/Users/junen/range/blog/node_modules/express/lib/router/index.js","function":null,"line":280,"method":null,"native":false},{"column":10,"file":"/Users/junen/range/blog/node_modules/express/lib/router/index.js","function":"next","line":271,"method":null,"native":false},{"column":8,"file":"/Users/junen/range/blog/node_modules/express/lib/view.js","function":"View.render","line":126,"method":"render","native":false},{"column":10,"file":"/Users/junen/range/blog/node_modules/express/lib/application.js","function":"tryRender","line":639,"method":null,"native":false},{"column":3,"file":"/Users/junen/range/blog/node_modules/express/lib/application.js","function":"EventEmitter.render","line":591,"method":"render","native":false},{"column":7,"file":"/Users/junen/range/blog/node_modules/express/lib/response.js","function":"ServerResponse.render","line":960,"method":"render","native":false},{"column":8,"file":"/Users/junen/range/blog/routes/posts.js","function":"PostModel.getPosts.then","line":13,"method":"getPosts.then","native":false},{"column":23,"file":"/Users/junen/range/blog/node_modules/mongolass/node_modules/bluebird/js/release/util.js","function":"tryCatcher","line":16,"method":null,"native":false},{"column":31,"file":"/Users/junen/range/blog/node_modules/mongolass/node_modules/bluebird/js/release/promise.js","function":"Promise._settlePromiseFromHandler","line":510,"method":"_settlePromiseFromHandler","native":false}],"stack":["TypeError: /Users/junen/range/blog/views/error.ejs:1"," >> 1| <%- include('header') %>","    2| <div class=\"alert alert-warning\" role=\"alert\"> ","    3| \t<strong><%= error.message %></strong>","    4| \t<br><%= error.stack %>","","/Users/junen/range/blog/views/header.ejs:17","    15|   <% }else{ %>","    16|   <header class=\"header row\">"," >> 17|       <div class=\"col-lg-2\"> <a href=\"/posts?author=<%= user._id %>\" class=\"avatar\" data-toggle=\"tooltip\" data-placement=\"bottom\" title=\"<%= user.name %> | <%= ({m: '男', f: '女', x: '保密'})[user.gender] %>\"><img src=\"/img/<%= user.avatar %>\"></a>","    18|       </div>","    19|       <div class=\"col-lg-10\">","    20|         <h3 class=\"text-muted\"><%= user.name %></h3>","","Cannot read property '_id' of null","    at eval (eval at compile (/Users/junen/range/blog/node_modules/ejs/lib/ejs.js:524:12), <anonymous>:26:30)","    at eval (eval at compile (/Users/junen/range/blog/node_modules/ejs/lib/ejs.js:524:12), <anonymous>:9:17)","    at tryHandleCache (/Users/junen/range/blog/node_modules/ejs/lib/ejs.js:203:34)","    at View.render (/Users/junen/range/blog/node_modules/express/lib/view.js:126:8)","    at tryRender (/Users/junen/range/blog/node_modules/express/lib/application.js:639:10)","    at EventEmitter.render (/Users/junen/range/blog/node_modules/express/lib/application.js:591:3)","    at ServerResponse.render (/Users/junen/range/blog/node_modules/express/lib/response.js:960:7)","    at app.use (/Users/junen/range/blog/routes/index.js:20:7)","    at Layer.handle_error (/Users/junen/range/blog/node_modules/express/lib/router/layer.js:71:5)","    at trim_prefix (/Users/junen/range/blog/node_modules/express/lib/router/index.js:310:13)","    at /Users/junen/range/blog/node_modules/express/lib/router/index.js:280:7","    at next (/Users/junen/range/blog/node_modules/express/lib/router/index.js:271:10)","    at trim_prefix (/Users/junen/range/blog/node_modules/express/lib/router/index.js:310:13)","    at /Users/junen/range/blog/node_modules/express/lib/router/index.js:280:7","    at next (/Users/junen/range/blog/node_modules/express/lib/router/index.js:271:10)","    at View.render (/Users/junen/range/blog/node_modules/express/lib/view.js:126:8)","    at tryRender (/Users/junen/range/blog/node_modules/express/lib/application.js:639:10)","    at EventEmitter.render (/Users/junen/range/blog/node_modules/express/lib/application.js:591:3)","    at ServerResponse.render (/Users/junen/range/blog/node_modules/express/lib/response.js:960:7)","    at PostModel.getPosts.then (/Users/junen/range/blog/routes/posts.js:13:8)","    at tryCatcher (/Users/junen/range/blog/node_modules/mongolass/node_modules/bluebird/js/release/util.js:16:23)","    at Promise._settlePromiseFromHandler (/Users/junen/range/blog/node_modules/mongolass/node_modules/bluebird/js/release/promise.js:510:31)"],"req":{"url":"/posts","headers":{"host":"localhost:3000","connection":"keep-alive","pragma":"no-cache","cache-control":"no-cache","upgrade-insecure-requests":"1","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/56.0.2924.87 Safari/537.36","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8","referer":"http://localhost:3000/posts","accept-encoding":"gzip, deflate, sdch, br","accept-language":"zh-CN,zh;q=0.8,en;q=0.6","cookie":"blog=s%3AOI3FEyNVRs2harXPS8eeGxu2Wv_puXIY.j2YIuGAzdA1panQOSbY4ynKmgfHTiK6muOEgU8UUdzM"},"method":"GET","httpVersion":"1.1","originalUrl":"/posts","query":{}},"level":"error","message":"middlewareError","timestamp":"2017-03-03T02:44:52.299Z"}
